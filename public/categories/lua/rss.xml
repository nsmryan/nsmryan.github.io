<?xml version="1.0" encoding="UTF-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>itscomputersciencetime</title>
        <link>http%3A//nsmryan.github.com/public</link>
        <description></description>
        <generator>Zola</generator>
        <language>en</language>
        <atom:link href="http%3A//nsmryan.github.com/public/categories/lua/rss.xml" rel="self" type="application/rss+xml"/>
        <lastBuildDate>Wed, 29 Nov 2017 00:00:00 +0000</lastBuildDate>
        
            <item>
                <title>Lua Tables</title>
                <pubDate>Wed, 29 Nov 2017 00:00:00 +0000</pubDate>
                <link>http%3A//nsmryan.github.com/public/lua-tables/</link>
                <guid>http%3A//nsmryan.github.com/public/lua-tables/</guid>
                <description>&lt;p&gt;This is a post about Lua&#x27;s tables. Its not an introduction (its gotten too long as it is) but rather some thoughts on their uses, how they fit into the context of structures
in other languages, and some of the trade-offs that they make.&lt;&#x2F;p&gt;
&lt;p&gt;Lua tables are odd structures, mixing an array, a key-value map, a namespace, or an object depending on how you use it. It can be other things too, if
you play around with meta-tables. It can even mix and match between these, which creates hybrid use-cases.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;core-data-structures&quot;&gt;Core Data Structures&lt;&#x2F;h1&gt;
&lt;p&gt;A language with a core data structure is not unusual, and comes with some trade-offs. I have been finding that the Lua table takes an unusual place in the scheme of core data structures,
being more flexible and powerful then the core structure of other languages. I do wish for static types, and I&#x27;m not a fan of re-using a single structure for everything, but this situation is
at least an interesting point in that design space.&lt;&#x2F;p&gt;
&lt;p&gt;There are many languages that have a single data structure that is core to their mentality, or at least implementation. They are &amp;quot;core&amp;quot; in different ways, and play different roles- the
thing that ties them together is just that using the language means understanding the relationship between the structure and the language.&lt;&#x2F;p&gt;
&lt;p&gt;This can be in the everything-is-an-X (or almost-everything-is-an-X), like how in python (and other languages) everything is an object (I&#x27;m ignoring some technicalities to make the point here).
It can also be that a language has a core data structure, even when it has other primitive structures, like cons cells and Lisp.
For Forth, everything is a cell (not the same as a cons cell) even though the core unit of organization is a word (like a function, not a machine word). 
In C everthing is an integer- function pointers, pointers to anything, return codes, enumerations- everything ends up being an integer.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;tradeoffs&quot;&gt;Tradeoffs&lt;&#x2F;h1&gt;
&lt;p&gt;Re-using a structure is not necessarily the best approach, for a number of reasons. One is that building a universe of structures out of a single structure means that 1) the core structure
will fit some situations well, and some less well, 2) if the core structure is complex, the result will be complex (like in the case of objects), but if the core structure is simple then
the result will consist of a complex arrangement of simple things, which leads into 3) which is that programs will usually rely on a convention or concept of what the larger structure is
supposed to look like (invariants) without any way of enforcing it. This last one is especially bad in dynamic languages where you have to understand the complex structure though reading code and 
documentation, and trying to imagine how its supposed to look. This requires dynamic information which is not immediately available and requires a lot of mental evaluation, making it difficult
to reason locally about code and data.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;lua-tables&quot;&gt;Lua Tables&lt;&#x2F;h1&gt;
&lt;p&gt;In the case of Lua Tables, the core structure is somewhat complex, and contains some unusual features (metatables in particular). It is essentially a mapping. If you give it integers
as indices, then it is like an array, if you give it strings as keys it acts as a namespace, and if you give it arbitrary values it is just a key-value map. It happens that integers
are treated specially so that you can get the length of the table as an array (for items with integer keys). If you give consequtive integers then it is an array, and non-consequtive integers
map a sparse array.&lt;&#x2F;p&gt;
&lt;p&gt;If you use strings, then they can be used with dot notation as fields of an object. Whats weird is that if you do both integers and strings, you get an object with access to an array. I&#x27;m
not sure that this is a good idea, but it does package your meta information with the array data itself.&lt;&#x2F;p&gt;
&lt;p&gt;The other dimension here is metatables. These expand the abilies of Lua tables in a couple of ways- you can specify the behavior in certain situations, like handling the situation where
a key is not found in a table (either to look up in a parent table, or return a calculated value, or anything else), intercepting indexing into the table, or to do operator overloading.
You can even use this to create your own object system if that is your thing. I&#x27;m no object oriented programmer, but I&#x27;m using the middleclass system in Lua and finding it not bad for
my toy games.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;some-experience&quot;&gt;Some Experience&lt;&#x2F;h1&gt;
&lt;p&gt;When making the simple games with the Love framework, I&#x27;ve found these tables to be quite useful. You can have an entity that contains a grid of cells, and keep information about how many
cells are used within the same strucuture. You can create your own grid data structure which store your grid sparsely by using the index metamethod. You use the same structure for keeping
your entities in a structure as the entities themselves, and all your other data, so that you always know what structure to reach for.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;type-systems&quot;&gt;Type Systems&lt;&#x2F;h1&gt;
&lt;p&gt;For my plug for good type systems, its worth mentioning that in some languages (Haskell) the type system makes many more distinctions between structures, allowing more structure to be described.
This means that the complex structures are made of a set of simple basic structures, composed in a set of simple ways. This leads to structures that can be understood and checked statically.
I won&#x27;t go too much into this- its been described enough elsewhere.&lt;&#x2F;p&gt;
</description>
            </item>
        
            <item>
                <title>Lua Games!</title>
                <pubDate>Tue, 28 Nov 2017 00:00:00 +0000</pubDate>
                <link>http%3A//nsmryan.github.com/public/lua-games/</link>
                <guid>http%3A//nsmryan.github.com/public/lua-games/</guid>
                <description>&lt;p&gt;I&#x27;ve been playing around with Lua and the LOVE game engine recently, and it is a lot of fun.&lt;&#x2F;p&gt;
&lt;p&gt;I am finding that there is something about this combination that is just fun. I can put together concepts quickly, get things on the screen,
and iterate very quickly.&lt;&#x2F;p&gt;
&lt;p&gt;One of the fun things about LOVE is that it is so easy to get simple, geometric things on the screen. I missed being able to just draw on canvases in Unity.&lt;&#x2F;p&gt;
&lt;p&gt;The other fun thing is that it is so much easier to get a shader in place then other systems I&#x27;ve used (Unity, GameMaker, and the Elm language). This is great because
shaders offer so much power to make fun visuals. &lt;&#x2F;p&gt;
&lt;p&gt;I&#x27;ve also enjoyed some of the libraries that are available. I especially like imgui- its got a really nice developer gui feel, its easy to use, and gives a lot of the abilities of the Unity
editor, but in a way that you can put together yourself for your needs. &lt;&#x2F;p&gt;
&lt;p&gt;I also like love-toys, which is an entity component system. Its been interesting going from Unity, where everything is built-in, to LOVE where you can kind of assemble the peices you want.
In the case of the entity system, its much more manual then it is in C# in Unity, but much better. I would rather do things programatically and be able to control how things work then
offer up my code to a framework and try to figure out what it is doing.&lt;&#x2F;p&gt;
&lt;p&gt;The last thing is just the fun of using Lua. Its fun to use a new language, and its kind of a fun language by itself. 
Its dynamically typed, and has all the problems that come with that, but for simply fun programs that is fine. Its tables are quite strange, but are useful in a lot of cases. Hopefully 
I will write more about this in another post.&lt;&#x2F;p&gt;
&lt;p&gt;There is one game at http:&#x2F;&#x2F;github.com&#x2F;nsmryan&#x2F;lua-games, and one start of another.&lt;&#x2F;p&gt;
&lt;p&gt;The one game (first-game) happened organically while trying things out. It consists of dots that split periodically, and a cursor with certain powers to remove or effect the dots.
There is no real point- you can remove the dots if you want, and try out different keyboard keys to see what happens, but there is objective or ending.&lt;&#x2F;p&gt;
&lt;p&gt;The second is just lots of experiments with shaders, flocking, cellular things, nearest neighbors, and cursors. Its not necessarily going anywhere, but its got some simple behaviors,
growth, and flocking, which are things I&#x27;m interested in. It was partially an experiment in structuring code in Lua and LOVE- where the first game became unweldy, the entity system
gives a way to structure data and code.&lt;&#x2F;p&gt;
&lt;p&gt;Anyway, I recommend Lua, LOVE, and imgui both for fun, and for work. You can put together tools pretty quickly, and get visuals on the screen with very little code. The LuaJit FFI also
gives me ideas about visualizing information from embedded systems code.&lt;&#x2F;p&gt;
</description>
            </item>
        
    </channel>
</rss>
